(this["webpackJsonpmy-spa"]=this["webpackJsonpmy-spa"]||[]).push([[0],{25:function(e,t,a){e.exports=a.p+"static/media/loader.3ef7bea4.gif"},35:function(e,t,a){},44:function(e,t,a){e.exports=a(76)},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a(16),i=a(22),s=a(18),l=a(34),u=a(39),p=a(11),h=a(9),m=a(20),d="PRODUCTS_LOADING",g="PRODUCTS_ERROR",f="PRODUCTS_SET",v="IS_PRODUCT_FAVORITE",b=function(e){return{type:v,item:e}};function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={status:0,data:null};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return C({},e,{status:1,data:null});case g:return C({},e,{status:2});case f:return C({},e,{status:3,data:t.products});case v:var a=e.data.findIndex((function(e){return e.id===t.item.id}));return 0===a?C({},e,{status:e.status,data:[t.item].concat(Object(h.a)(e.data.slice(1)))}):a===e.data.length-1?C({},e,{status:e.status,data:[].concat(Object(h.a)(e.data.slice(0,e.data.length-1)),[t.item])}):C({},e,{status:e.status,data:[].concat(Object(h.a)(e.data.slice(0,a)),[t.item],Object(h.a)(e.data.slice(a+1,e.data.length)))});default:return e}}var P="CART_LOADING",S="CART_ERROR",j="CART_SET",k="SHOPPING_CART_ADD",A="SHOPPING_CART_REMOVE",w="SHOPPING_CART_REMOVE_ALL",N=function(){return{type:P}},F=function(){return{type:S}},L=function(e){return{type:j,shoppingCart:e}},I=function(e){return{type:k,item:e}},T=function(e){return{type:A,item:e}},D=function(){return{type:w}};function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var B={status:0,items:null};function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return M({},e,{status:1,items:null});case S:return M({},e,{status:2,items:null});case j:return M({},e,{status:3,items:t.shoppingCart});case k:return M({},e,{items:[].concat(Object(h.a)(e.items),[t.item])});case A:var a=e.items.filter((function(e){return e.id!==t.item.id}));return M({},e,{items:Object(h.a)(a)});case w:return M({},e,{items:null});default:return e}}var _,x=Object(p.a)(),H=[u.a,Object(l.a)(x)],W=s.d.apply(void 0,[s.a.apply(void 0,H)].concat([])),G=Object(s.e)((_=x,Object(s.c)({router:Object(i.b)(_),products:O,shoppingCart:U})),{},W),V=(a(54),a(2)),J=a(3),q=a(5),Y=a(4),$=a(6),z=(a(55),a(12)),Z=Object(p.a)(),K=a(8),Q=(a(56),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.history.push("/catalog/page-1")},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"PagesLinks"},r.a.createElement(K.b,{to:"/",exact:!0,className:"PageLink",activeClassName:"ActivePageLink"},"Main Page"),r.a.createElement(K.b,{to:"/catalog",className:"PageLink",activeClassName:"ActivePageLink",onClick:this.handleClick},"Catalog"),r.a.createElement(K.b,{to:"/basket",className:"PageLink",activeClassName:"ActivePageLink"},"Shopping Cart"))}}]),t}(n.PureComponent)),X=Object(z.h)(Q);function ee(){return r.a.createElement("div",{className:"Page_Main"},r.a.createElement("h1",null,"My first SPA!"))}var te=new(a(41).EventEmitter),ae=a(31),ne=a.n(ae),re=a(42),oe=a(19),ce=a.n(oe);function ie(e){return function(){e(N()),ce()("http://localhost:3004/shoppingCart").then((function(e){if(e.ok)return e.json();var t=new Error("fetch error "+e.status);throw t.userMessage="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0432\u044f\u0437\u0438",t})).then((function(t){e(L(t))})).catch((function(t){console.error(t),e(F())}))}}function se(e){return function(){ce()("http://localhost:3004/shoppingCart",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){if(e.ok)return e.json();var t=new Error("fetch error "+e.status);throw t.userMessage="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0432\u044f\u0437\u0438",t})).catch((function(e){console.error(e)}))}}var le=a(25),ue=a.n(le),pe=(a(59),"NO_SORT"),he="BY_PRICE",me="BY_NAME",de=function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={sortBy:pe},a.onHandleChangeSelect=function(e){var t=a.props,n=t.location,r=t.history;a.setState({sortBy:e.target.value}),r.push("".concat(n.pathname,"?sort=").concat(e.target.value.toLowerCase())),te.emit("EonHandleChangeSelectSorting",e.target.value)},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props.location.search.replace(/\?sort=(?=\w+)/g,"").toUpperCase();this.setState({sortBy:n},this.getSortedProductsArray)}},{key:"render",value:function(){var e=this.props.location,t=e.search.replace(/\?sort=(?=\w+)/g,"").toUpperCase();return r.a.createElement(n.Fragment,null,r.a.createElement("select",{value:e.search?t:pe,onChange:this.onHandleChangeSelect},r.a.createElement("option",{defaultValue:pe,value:pe},"No Sorting:"),r.a.createElement("option",{value:me},"Name A-Z"),r.a.createElement("option",{value:he},"Price 0-9")))}}]),t}(n.PureComponent),ge=Object(z.h)(de),fe=(a(60),"LEFT"),ve="RIGHT",be=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=t;)r.push(n),n+=a;return r},Ee=function(e){function t(e){var a;Object(V.a)(this,t),(a=Object(q.a)(this,Object(Y.a)(t).call(this,e))).state={currentPage:a.props.currentPage,pageLimit:50,totalPages:Math.ceil(a.props.totalRecords/50)},a.gotoPage=function(e){var t=a.props.cbOnPageChanged,n=void 0===t?function(e){return e}:t,r=Math.max(0,Math.min(e,a.state.totalPages)),o=a.state,c=o.pageLimit,i={currentPage:r,totalPages:o.totalPages,pageLimit:c,totalRecords:a.totalRecords};a.setState({currentPage:r},(function(){return n(i)}))},a.pageLimitChange10=function(){var e=Math.ceil(a.totalRecords/10);a.setState({pageLimit:10,totalPages:e},(function(){return a.gotoPage(a.state.currentPage)}))},a.pageLimitChange50=function(){var e=Math.ceil(a.totalRecords/50);a.setState({pageLimit:50,totalPages:e},(function(){return a.gotoPage(a.state.currentPage)}))},a.handleClick=function(e){a.gotoPage(e)},a.handleMoveLeft=function(){a.gotoPage(a.state.currentPage-1)},a.handleMoveRight=function(){a.gotoPage(a.state.currentPage+1)},a.fetchPageNumbers=function(){var e=a.state.totalPages,t=a.state.currentPage,n=a.pageNeighbours,r=2*a.pageNeighbours+3;if(e>r+2){var o=[],c=t-n,i=t+n,s=e-1,l=c>2?c:2,u=i<s?i:s,p=r-(o=be(l,u)).length-1,m=l>2,d=u<s,g=fe,f=ve;if(m&&!d){var v=be(l-p,l-1);o=[g].concat(Object(h.a)(v),Object(h.a)(o))}else if(!m&&d){var b=be(u+1,u+p);o=[].concat(Object(h.a)(o),Object(h.a)(b),[f])}else m&&d&&(o=[g].concat(Object(h.a)(o),[f]));return[1].concat(Object(h.a)(o),[e])}return be(1,e)};var n=e.totalRecords,r=void 0===n?null:n,o=e.pageNeighbours,c=void 0===o?0:o;return a.totalRecords="number"===typeof r?r:0,a.pageNeighbours="number"===typeof c?Math.max(0,Math.min(c,2)):0,a}return Object($.a)(t,e),Object(J.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){te.addListener("EcurrentPageToHandleClick",this.handleClick)}},{key:"componentDidUpdate",value:function(e,t,a){var n=+this.props.location.pathname.replace(/[^0-9]/g,"");this.props.location.pathname!==e.location.pathname&&(this.setState({currentPage:0===n||n>this.totalPages?1:n,totalPages:Math.ceil(this.props.totalRecords/this.state.pageLimit)}),this.gotoPage(n))}},{key:"componentDidMount",value:function(){this.gotoPage(this.state.currentPage)}},{key:"componentWillUnmount",value:function(){te.removeListener("EcurrentPageToHandleClick",this.handleClick)}},{key:"render",value:function(){var e=this;if(!this.totalRecords)return null;if(1===this.totalPages)return null;var t=this.state,a=t.currentPage,o=t.totalPages,c=this.fetchPageNumbers(),i=this.props.location;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"PageLimitButtons"},"Show:",r.a.createElement("button",{value:10,children:10,onClick:this.pageLimitChange10,className:10===this.state.pageLimit?"active":""}),r.a.createElement("button",{value:50,children:50,onClick:this.pageLimitChange50,className:50===this.state.pageLimit?"active":""})),r.a.createElement("nav",{"aria-label":"paginationBlock"},r.a.createElement("ul",{className:"pagination"},c.map((function(t,n){return t===fe?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement(K.a,{to:"/catalog/page-".concat(e.state.currentPage-1),className:"page-link","aria-label":"Previous",onClick:e.handleMoveLeft},r.a.createElement("span",{"aria-hidden":"true"},"\xab"))):t===ve?r.a.createElement("li",{key:n,className:"page-item"},r.a.createElement(K.a,{to:"/catalog/page-".concat(e.state.currentPage+1),className:"page-link","aria-label":"Next",onClick:e.handleMoveRight},r.a.createElement("span",{"aria-hidden":"true"},"\xbb"))):r.a.createElement("li",{key:n,className:"page-item".concat(a===t?" active":"")},r.a.createElement(K.a,{to:"/catalog/page-".concat(t+i.search),className:"page-link",onClick:function(a){return e.handleClick(t,a)}},t))})))),a&&r.a.createElement("div",null,"Page ",r.a.createElement("span",{className:"current-page"},a)," /"," ",r.a.createElement("span",{className:"total-page"},o)))}}]),t}(n.PureComponent),Ce=Object(z.h)(Ee),ye=function(e){function t(){return Object(V.a)(this,t),Object(q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,a=e.fill;return r.a.createElement("svg",{viewBox:"0 0 49.94 49.94",height:"25",width:"23",className:"star rating","data-rating":"1"},r.a.createElement("path",{d:"M48.856,22.73c0.983-0.958,1.33-2.364,0.906-3.671c-0.425-1.307-1.532-2.24-2.892-2.438l-12.092-1.757\r c-0.515-0.075-0.96-0.398-1.19-0.865L28.182,3.043c-0.607-1.231-1.839-1.996-3.212-1.996c-1.372,0-2.604,0.765-3.211,1.996\r L16.352,14c-0.23,0.467-0.676,0.79-1.191,0.865L3.069,16.622c-1.359,0.197-2.467,1.131-2.892,2.438\r c-0.424,1.307-0.077,2.713,0.906,3.671l8.749,8.528c0.373,0.364,0.544,0.888,0.456,1.4L8.224,44.701\r c-0.183,1.06,0.095,2.091,0.781,2.904c1.066,1.267,2.927,1.653,4.415,0.871l10.814-5.686c0.452-0.237,1.021-0.235,1.472,0\r l10.815,5.686c0.526,0.277,1.087,0.417,1.666,0.417c1.057,0,2.059-0.47,2.748-1.288c0.687-0.813,0.964-1.846,0.781-2.904\r l-2.065-12.042c-0.088-0.513,0.083-1.036,0.456-1.4L48.856,22.73z",fill:t?"gold":a,stroke:"#000"}))}}]),t}(n.PureComponent);ye.defaultProps={className:void 0,fill:"#fff",isActive:!1};var Oe=ye;a(35);function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Se="IS_FAVORITE",je=function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={isFavorite:a.props.item.IS_FAVORITE,inCart:!1,colorFavorite:a.props.colorFavorite},a.isFavoriteItemHandleClick=function(){a.state.isFavorite?a.favoriteDisable():a.favoriteActive()},a.favoriteActive=function(){a.setState({isFavorite:!0},(function(){return a.isFavoriteItem(a.state.isFavorite)}))},a.favoriteDisable=function(){a.setState({isFavorite:!1},(function(){return a.isFavoriteItem(a.state.isFavorite)}))},a.isFavoriteItem=function(){var e=a.props.item,t=a.state.isFavorite,n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(a,!0).forEach((function(t){Object(m.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e);t?n[Se]=t:delete n[Se],te.emit("EisFavoriteItemOnChange",n)},a.handleClickAddToCart=function(){var e=a.props.item;te.emit("EhandleClickAddToCart",e),a.setState({inCart:!0})},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){}},{key:"render",value:function(){var e=this.props,t=e.showMode,a=e.colorFavorite,o=this.props.item,c=this.state.isFavorite;return r.a.createElement("div",{className:"ShopCatalogItem ".concat(c?"active":""," ").concat(t===Ie?"single":""," "),key:o.id},r.a.createElement("div",{className:"block",style:c&&a?{backgroundColor:"#ff4b46"}:{}},r.a.createElement("img",{src:"/Images/Shop/".concat(o.ImgSrc),alt:""}),r.a.createElement("div",{className:"itemInfo"},r.a.createElement("h2",null,t===Ie?o.Name:r.a.createElement(K.a,{to:"/catalog/item-".concat(o.id),className:"SingleItemName"},o.Name)),r.a.createElement("div",{className:"priceBlock"},r.a.createElement("span",{className:"itemPrice"},0===o.Price?r.a.createElement("span",null,"Available only if isFavorite"):r.a.createElement(n.Fragment,null,"Price: ",r.a.createElement("span",null,o.Price)," $")),r.a.createElement("div",{className:"buttonBlock"},r.a.createElement("input",{type:"button",className:"inBasket",value:o.Price||c?"Add to Sopping Cart":"can't Order",disabled:!o.Price&&!c,onClick:this.handleClickAddToCart}))),t===Ie&&r.a.createElement("div",null,r.a.createElement("span",null,o.excerpt)))),t===Le&&r.a.createElement("div",{className:"favorite"},r.a.createElement("button",{className:"favoriteButton ".concat(c?"active":""),onClick:this.isFavoriteItemHandleClick},r.a.createElement(Oe,{isActive:c}))))}}]),t}(n.PureComponent),ke=function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={products:a.props.products,allFavoriteCount:0},a.getFavoriteCount=function(){for(var e=a.state.products,t=0,n=0;n<e.length;n++)!0===e[n].IS_FAVORITE&&t++;return a.setState({allFavoriteCount:t}),t},a.colorAllFavorite=function(e){te.emit("EcolorAllFavoriteByClick",e)},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.products!==e.products&&this.setState({products:this.props.products}),this.getFavoriteCount()}},{key:"componentDidMount",value:function(){this.getFavoriteCount()}},{key:"render",value:function(){var e=this.state.allFavoriteCount;return r.a.createElement("div",null,e>0&&r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:this.colorAllFavorite,value:"Color all Favorite: ".concat(e," products")}),"Color all Favorite: ",e," products"))}}]),t}(n.PureComponent),Ae=function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={isSortBy:pe,allProducts:a.props.products,allSortedProducts:[],colorFavorite:!1,currentPageProducts:[],currentPage:a.props.currentPage,totalPages:null,onPageChangedData:{}},a.colorAllFavoriteProducts=function(){var e=a.state.colorFavorite;a.setState({colorFavorite:!e}),a.currentPageToHandleClick()},a.currentPageToHandleClick=function(){te.emit("EcurrentPageToHandleClick",a.state.currentPage)},a.onPageChanged=function(e){a.setState({onPageChangedData:e});var t=a.state,n=t.allSortedProducts,r=t.isSortBy,o=t.allProducts,c=e.currentPage,i=e.totalPages,s=e.pageLimit,l=(c-1)*s,u=(r!==pe?n:o).slice(l,l+s);a.setState({currentPage:c,currentPageProducts:u,totalPages:i})},a.getSortedProductsByName=function(){var e;e=a.props.products.slice().sort((function(e,t){var a=e.Name.toLowerCase(),n=t.Name.toLowerCase();return a<n?-1:a>n?1:0})),a.setState({allSortedProducts:e})},a.getSortedProductsByPrice=function(){var e;e=a.props.products.slice().sort((function(e,t){return e.Price-t.Price})),a.setState({allSortedProducts:e},(function(){return a.onPageChanged}))},a.getSortedProductsArray=function(e){a.setState({isSortBy:e}),e===me?a.getSortedProductsByName():e===he?a.getSortedProductsByPrice():a.setState({allSortedProducts:[],isSortBy:pe}),a.currentPageToHandleClick()},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n=this;if(this.props.products!==e.products&&this.setState({allProducts:this.props.products}),this.props.location.search!==e.location.search){var r=this.props.location.search.replace(/\?sort=(?=\w+)/g,"").toUpperCase();this.setState({isSortBy:r},(function(){return n.getSortedProductsArray(n.state.isSortBy)}))}var o=+this.props.location.pathname.replace(/[^0-9]/g,"");this.props.location.pathname!==e.location.pathname&&this.setState({currentPage:o})}},{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.location.search.replace(/\?sort=(?=\w+)/g,"").toUpperCase();this.setState({isSortBy:t},(function(){return e.getSortedProductsArray(e.state.isSortBy)}))}},{key:"componentDidMount",value:function(){te.addListener("EcolorAllFavoriteByClick",this.colorAllFavoriteProducts),te.addListener("EonHandleChangeSelectSorting",this.getSortedProductsArray)}},{key:"componentWillUnmount",value:function(){te.removeListener("EcolorAllFavoriteByClick",this.colorAllFavoriteProducts),te.removeListener("EonHandleChangeSelectSorting",this.getSortedProductsArray)}},{key:"render",value:function(){var e=this.state,t=e.allProducts,a=e.currentPageProducts,n=e.currentPage,o=e.colorFavorite,c=t.length;return 0===c?null:r.a.createElement("div",{className:"ShopCatalog"},r.a.createElement("div",{className:"sortingBlock"},r.a.createElement(ge,{products:t}),r.a.createElement(ke,{products:t})),a.map((function(e){return r.a.createElement(je,{className:"CatalogItem",key:e.id,item:e,showMode:Le,colorFavorite:o})})),r.a.createElement(Ce,{totalRecords:c,pageNeighbours:1,cbOnPageChanged:this.onPageChanged,currentPage:n}))}}]),t}(n.PureComponent),we=Object(z.h)(Ae),Ne=function(e){function t(){return Object(V.a)(this,t),Object(q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"Success! Shopping Cart is empty. Thanks!")}}]),t}(n.PureComponent),Fe=Object(z.h)(Ne),Le="CATALOG_ITEM",Ie="SINGLE_ITEM",Te="GREEN",De="RED",Re=function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={currentPage:1,products:a.props.products.data,shoppingCart:null},a.setFavoriteItem=function(e){a.props.dispatch(b(e))},a.addItemToShoppingCart=function(e){var t=a.state.shoppingCart;t.length>0&&t.some((function(t){return t.id===e.id}))?te.emit("EshowAlertCart",De):(a.props.dispatch(I(e)),a.props.dispatch(se(e)),te.emit("EshowAlertCart",Te))},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch((this.props.dispatch,function(){var e=Object(re.a)(ne.a.mark((function e(t){var a,n;return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:d}),e.prev=1,e.next=4,ce()("http://localhost:3004/posts",{headers:{Accept:"application/json","Content-Type":"application/json",body:JSON.stringify(t)}});case 4:return(a=e.sent).ok||t({type:g}),e.next=8,a.json();case 8:n=e.sent,t({type:f,products:n}),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())),this.props.dispatch(ie(this.props.dispatch))}},{key:"componentDidUpdate",value:function(e,t,a){var n=+this.props.location.pathname.replace(/[^0-9]/g,"");void 0!==this.props.match.params.urlParams&&this.setState({currentPage:n}),this.setState({products:this.props.products.data}),this.setState({shoppingCart:this.props.shoppingCart.items})}},{key:"componentDidMount",value:function(){te.addListener("EisFavoriteItemOnChange",this.setFavoriteItem),te.addListener("EhandleClickAddToCart",this.addItemToShoppingCart)}},{key:"componentWillUnmount",value:function(){te.removeListener("EisFavoriteItemOnChange",this.setFavoriteItem),te.removeListener("EhandleClickAddToCart",this.addItemToShoppingCart)}},{key:"render",value:function(){var e=this.props,t=e.match,a=e.products,o=e.location;return a.status<=1?r.a.createElement("img",{src:ue.a,alt:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"}):2===a.status?r.a.createElement("p",null,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"):r.a.createElement("div",{className:"PageShop"},r.a.createElement(z.e,null,o.pathname.includes("page-")?r.a.createElement(z.c,{path:"/".concat(t.params.catalog,"/page-:pageNumber"),render:function(e){var t=e.match;return r.a.createElement(n.Fragment,null,a.data&&r.a.createElement(we,{currentPage:+t.params.pageNumber,products:a.data,showMode:Le}))}}):r.a.createElement(z.c,{path:"/".concat(t.params.catalog,"/item-:itemId"),render:function(e){var t=e.match,n=a.data.filter((function(e){return e.id===+t.params.itemId}))[0];return r.a.createElement(je,{className:"SingleItem",item:n,showMode:Ie})}}),"}",r.a.createElement(z.c,{path:"/success"},r.a.createElement(Fe,null))))}}]),t}(n.PureComponent),Me=Object(z.h)(Re),Be=Object(c.c)((function(e){return{products:e.products,shoppingCart:e.shoppingCart}}))(Me),Ue=(a(61),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={color:null,shouldShow:!1},a.showAlert=function(e){a.setState({color:e,shouldShow:!0})},a.timer=function(){setTimeout(a.showAlert,1e3),a.clearTimeout()},a.clearTimeout=function(){clearInterval(a.timer)},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"componentDidMount",value:function(){te.addListener("EshowAlertCart",this.showAlert),this.clearTimeout()}},{key:"componentWillUnmount",value:function(){te.removeListener("EshowAlertCart",this.showAlert),this.clearTimeout()}},{key:"componentDidUpdate",value:function(e,t,a){this.timer()}},{key:"render",value:function(){var e=this.state,t=e.color,a=e.shouldShow;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"AlertsBlock"},a?r.a.createElement("span",{className:t},t===Te&&r.a.createElement("h3",null,"Product successfully added to shopping cart"),t===De&&r.a.createElement("h3",null,"The product is already in your shopping cart")):null))}}]),t}(n.PureComponent)),_e=(a(62),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).handleClickRemove=function(){var e=a.props.item;te.emit("EhandleClickDeleteItem",e)},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this.props.item;return r.a.createElement("div",{className:"ShoppingCartItem"},r.a.createElement("div",{className:"block"},r.a.createElement("img",{src:"/Images/Shop/".concat(e.ImgSrc),alt:""}),r.a.createElement("h2",null,r.a.createElement(K.a,{to:"/catalog/item-".concat(e.id),className:"SingleItemName"},e.Name)),r.a.createElement("div",{className:"priceBlock"},r.a.createElement("span",{className:"itemPrice"},r.a.createElement(n.Fragment,null,"Price: ",r.a.createElement("span",null,e.Price)," $")),r.a.createElement("div",{className:"buttonDelete"},r.a.createElement("input",{type:"button",className:"inBasket",value:"Delete",onClick:this.handleClickRemove})))))}}]),t}(n.PureComponent)),xe=(a(63),function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",tel:"",alert:!1},a.onClickButtonSend=function(e){var t=a.state,n=t.name,r=t.tel;n&&r?a.setState({name:"",tel:""},(function(){return te.emit("EdeleteAllFromShoppingCart",e)})):a.setState({alert:!0})},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.alert,o=t.name,c=t.tel;return r.a.createElement(n.Fragment,null,r.a.createElement(z.a,{when:!!this.state.name||!!this.state.tel,message:function(e){return"Are you sure you want to go to ".concat(e.pathname,". Your changes will not be saved!")}}),r.a.createElement("div",{className:"checkoutBlock"},r.a.createElement("input",{type:"text",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}}),a&&!o&&r.a.createElement("span",{className:"alert"},"* Required field"),r.a.createElement("input",{type:"text",value:this.state.tel,onChange:function(t){return e.setState({tel:t.target.value})}}),a&&!c&&r.a.createElement("span",{className:"alert"},"* Required field"),r.a.createElement("input",{type:"button",value:"Send",onClick:this.onClickButtonSend})))}}]),t}(n.PureComponent)),He=Object(z.h)(xe),We=(a(64),a(43)),Ge=a.n(We),Ve=function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={shoppingCartProducts:a.props.shoppingCart,success:!0},a.deleteItemFromShoppingCart=function(e){var t=a.state.shoppingCartProducts,n=Object(h.a)(t).filter((function(t){return t.id!==e.id}));a.setState({shoppingCartProducts:n})},a.deleteAllFromShoppingCartAfterSubmit=function(){a.setState({shoppingCartProducts:[],success:!0},(function(){return a.successSubmit()}))},a.successSubmit=function(){var e=a.state.success,t=a.props.history;e&&t.push("/success")},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"componentDidMount",value:function(){te.addListener("EhandleClickDeleteItem",this.deleteItemFromShoppingCart),te.addListener("EdeleteAllFromShoppingCart",this.deleteAllFromShoppingCartAfterSubmit)}},{key:"componentWillUnmount",value:function(){te.removeListener("EhandleClickDeleteItem",this.deleteItemFromShoppingCart),te.removeListener("EdeleteAllFromShoppingCart",this.deleteAllFromShoppingCartAfterSubmit)}},{key:"render",value:function(){var e=this.state.shoppingCartProducts;return r.a.createElement("div",{className:"ShoppingCart"},e.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement(Ge.a,{transitionName:"example",transitionEnter:!1,transitionLeave:!0,transitionEnterTimeout:500,transitionLeaveTimeout:300},e.map((function(e){return r.a.createElement(_e,{key:e.id,item:e})}))),r.a.createElement(He,null)),0===e.length&&r.a.createElement("h1",null,"ShopCart is Empty"))}}]),t}(n.PureComponent),Je=function(e){function t(){var e,a;Object(V.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(q.a)(this,(e=Object(Y.a)(t)).call.apply(e,[this].concat(r)))).state={shoppingCartProducts:a.props.shoppingCart.items},a.addItemToShoppingCart=function(e){a.props.dispatch(I(e)),a.props.dispatch(se(e))},a.deleteItemFromShoppingCart=function(e){a.props.dispatch(T(e)),a.props.dispatch(function(e){return function(){ce()("http://localhost:3004/shoppingCart/"+e.id,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){if(e.ok)return e.json();var t=new Error("fetch error "+e.status);throw t.userMessage="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0432\u044f\u0437\u0438",t})).catch((function(e){console.error(e)}))}}(e))},a.deleteAllFromShoppingCartAfterSubmit=function(){var e=a.props.shoppingCart;a.props.dispatch(D()),a.props.dispatch(function(e){return console.log(e),function(){for(var t=0;t<e.items.length;t++)ce()("http://localhost:3004/shoppingCart/"+e.items[t].id,{method:"DELETE",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){if(e.ok)return e.json();var t=new Error("fetch error "+e.status);throw t.userMessage="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0432\u044f\u0437\u0438",t})).catch((function(e){console.error(e)}))}}(e))},a}return Object($.a)(t,e),Object(J.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.props.dispatch(ie(this.props.dispatch))}},{key:"componentDidUpdate",value:function(e,t,a){3===this.props.shoppingCart.status&&this.setState({shoppingCartProducts:this.props.shoppingCart.items})}},{key:"componentDidMount",value:function(){te.addListener("EhandleClickAddToCart",this.addItemToShoppingCart),te.addListener("EhandleClickDeleteItem",this.deleteItemFromShoppingCart),te.addListener("EdeleteAllFromShoppingCart",this.deleteAllFromShoppingCartAfterSubmit)}},{key:"componentWillUnmount",value:function(){te.removeListener("EhandleClickAddToCart",this.addItemToShoppingCart),te.removeListener("EhandleClickDeleteItem",this.deleteItemFromShoppingCart),te.removeListener("EdeleteAllFromShoppingCart",this.deleteAllFromShoppingCartAfterSubmit)}},{key:"render",value:function(){var e=this.props,t=e.shoppingCart,a=e.history;return t.status<=1?r.a.createElement("img",{src:ue.a,alt:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445"}):2===t.status?"\u043e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445":r.a.createElement(n.Fragment,null,r.a.createElement(z.c,{exact:!0,path:"/basket"},r.a.createElement(Ve,{shoppingCart:t.items,history:a})))}}]),t}(n.PureComponent),qe=Object(z.h)(Je),Ye=Object(c.c)((function(e){return{shoppingCart:e.shoppingCart}}))(qe),$e=function(e){function t(){return Object(V.a)(this,t),Object(q.a)(this,Object(Y.a)(t).apply(this,arguments))}return Object($.a)(t,e),Object(J.a)(t,[{key:"render",value:function(){return r.a.createElement(z.d,{history:Z},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(X,null)),r.a.createElement("main",null,r.a.createElement("div",{className:"contentBlock"},r.a.createElement(z.e,null,r.a.createElement(z.b,{exact:!0,from:"/catalog",to:"/catalog/page-1"}),r.a.createElement(z.c,{exact:!0,path:"/",component:ee}),r.a.createElement(z.c,{path:"/basket",component:Ye}),r.a.createElement(z.c,{path:"/:catalog/:urlParams?",component:Be})))),r.a.createElement(Ue,null)))}}]),t}(n.PureComponent),ze=Object(z.h)($e),Ze=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ke(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Qe=document.querySelector("#root");Object(o.render)(r.a.createElement(c.a,{store:G},r.a.createElement(i.a,{history:x},r.a.createElement("div",null,r.a.createElement(ze,null)))),Qe),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ze?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ke(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ke(t,e)}))}}()}},[[44,1,2]]]);
//# sourceMappingURL=main.61b7ed14.chunk.js.map