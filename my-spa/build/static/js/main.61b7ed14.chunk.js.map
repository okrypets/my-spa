{"version":3,"sources":["loader.gif","Redux/Actions/productsAC.js","Redux/Reducers/productsReducer.js","Redux/Actions/shoppingCartAC.js","Redux/Reducers/shoppingCartReducer.js","Redux/Reducers/index.js","Redux/store.js","history.js","pages/PagesNavLinks.js","pages/PageMain.js","Components/events.js","Redux/Thunk/fetchThunkCart.js","Components/SortingSelect.js","Components/Pagination.js","Components/IconStar.js","Components/ShopCatalogItem.js","Components/FavoriteCount.js","Components/ShopCatalog.js","Components/Success.js","pages/PageShop.js","Redux/Thunk/fetchThunkProducts.js","Components/Alerts.js","Components/ShoppingCartItem.js","Components/CheckOut.js","Components/ShoppingCart.js","pages/PageBasket.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","PRODUCTS_LOADING","PRODUCTS_ERROR","PRODUCTS_SET","IS_PRODUCT_FAVORITE","isProductFavoriteAC","item","type","initState","status","data","productsReducer","state","action","products","itemIndex","findIndex","i","id","slice","length","CART_LOADING","CART_ERROR","CART_SET","SHOPPING_CART_ADD","SHOPPING_CART_REMOVE","SHOPPING_CART_REMOVE_ALL","cartLoadingAC","cartErrorAC","cartSetAC","shoppingCart","shoppingCartAddAC","shoppingCartRemoveAC","delItem","shoppingCartRemoveAllAC","items","shoppingCartReducer","deletedItem","filter","history","createBrowserHistory","middleware","thunk","routerMiddleware","composedEnhancers","compose","applyMiddleware","createStore","combineReducers","router","connectRouter","PagesNavLinks","handleClick","props","push","className","to","exact","activeClassName","onClick","this","PureComponent","withRouterPagesNavLinks","withRouter","PageMain","appEvents","EventEmitter","shoppingCartThunkAC","dispatch","isoFetch","then","response","ok","json","Err","Error","userMessage","catch","error","console","shoppingCartAddThunkAC","method","headers","body","JSON","stringify","NO_SORT","BY_PRICE","BY_NAME","SortingSelect","sortBy","onHandleChangeSelect","e","location","setState","target","value","pathname","toLowerCase","emit","prevProps","prevState","Snapshot","pageCatalogSortedBy","search","replace","toUpperCase","getSortedProductsArray","onChange","defaultValue","withRouterSorting","LEFT_PAGE","RIGHT_PAGE","range","from","step","Pagination","currentPage","pageLimit","totalPages","Math","ceil","totalRecords","gotoPage","page","cbOnPageChanged","f","max","min","paginationData","pageLimitChange10","pageLimitChange50","handleMoveLeft","handleMoveRight","fetchPageNumbers","pageNeighbours","totalNumbers","pages","leftBound","rightBound","beforeLastPage","startPage","endPage","singleSpillOffset","leftSpill","rightSpill","leftSpillPage","rightSpillPage","extraPages","addListener","locationCurrentPage","removeListener","children","aria-label","map","index","key","aria-hidden","IconStar","isActive","fill","viewBox","height","width","data-rating","d","stroke","defaultProps","undefined","IS_FAVORITE","ShopCatalogItem","isFavorite","inCart","colorFavorite","isFavoriteItemHandleClick","favoriteDisable","favoriteActive","isFavoriteItem","newItem","handleClickAddToCart","showMode","SINGLE_ITEM","style","backgroundColor","src","ImgSrc","alt","Name","Price","disabled","excerpt","CATALOG_ITEM","FavoriteCount","allFavoriteCount","getFavoriteCount","sumOfFavorite","colorAllFavorite","ShopCatalog","isSortBy","allProducts","allSortedProducts","currentPageProducts","onPageChangedData","colorAllFavoriteProducts","currentPageToHandleClick","onPageChanged","offset","getSortedProductsByName","sortedByName","sort","a","b","nameA","nameB","getSortedProductsByPrice","sortedByPrice","sortingSelected","totalProducts","withRouterShopCatalog","Success","withRouterSuccess","GREEN","RED","PageShop","setFavoriteItem","addItemToShoppingCart","some","Accept","match","params","urlParams","loaderIconGif","includes","path","catalog","render","pageNumber","selectedItem","itemId","withRouterPageShop","connect","Alerts","color","shouldShow","showAlert","timer","setTimeout","clearTimeout","clearInterval","snapshot","ShoppingCartItem","handleClickRemove","CheckOut","name","tel","alert","onClickButtonSend","when","message","withRouterCheckOut","ShoppingCart","shoppingCartProducts","success","deleteItemFromShoppingCart","newshoppingCartProducts","deleteAllFromShoppingCartAfterSubmit","successSubmit","transitionName","transitionEnter","transitionLeave","transitionEnterTimeout","transitionLeaveTimeout","PageBasket","shoppingCartDELETEThunkAC","log","shoppingCartDELETEALLThunkAC","withRouterPageBasket","App","component","withRouterApp","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","document","querySelector","store","URL","process","href","origin","addEventListener","fetch","contentType","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.61b7ed14.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loader.3ef7bea4.gif\";","const PRODUCTS_LOADING='PRODUCTS_LOADING';\r\nconst PRODUCTS_ERROR='PRODUCTS_ERROR';\r\nconst PRODUCTS_SET='PRODUCTS_SET';\r\nconst IS_PRODUCT_FAVORITE = 'IS_PRODUCT_FAVORITE';\r\n\r\nconst productsLoadingAC=function() {\r\n    return {\r\n        type: PRODUCTS_LOADING,\r\n    };\r\n};\r\n\r\nconst productsErrorAC=function() {\r\n    return {\r\n        type: PRODUCTS_ERROR,\r\n    };\r\n};\r\n\r\nconst productsSetAC=function(products) {\r\n    return {\r\n        type: PRODUCTS_SET,\r\n        products:products,\r\n    };\r\n};\r\n\r\nconst isProductFavoriteAC=function(item) {\r\n    return {\r\n        type: IS_PRODUCT_FAVORITE,\r\n        item:item,\r\n    };\r\n};\r\n\r\n\r\nexport {\r\n    productsLoadingAC,PRODUCTS_LOADING,\r\n    productsErrorAC,PRODUCTS_ERROR,\r\n    productsSetAC,PRODUCTS_SET,\r\n    isProductFavoriteAC, IS_PRODUCT_FAVORITE,\r\n}\r\n","\r\nimport {PRODUCTS_LOADING, PRODUCTS_ERROR, PRODUCTS_SET,\r\n    IS_PRODUCT_FAVORITE\r\n} from '../Actions/productsAC';\r\n\r\nconst initState={\r\n    status: 0, // 0 - ничего не началось, 1 - идёт загрузка, 2 - была ошибка, 3 - данные загружены\r\n    data: null,\r\n}\r\n\r\nexport default function productsReducer(state=initState,action) {\r\n\r\n    switch (action.type) {\r\n\r\n        case PRODUCTS_LOADING: {\r\n            let newState;\r\n            newState = {...state,\r\n                status: 1,\r\n                data:null\r\n            };\r\n            return newState;\r\n        }\r\n\r\n        case PRODUCTS_ERROR: {\r\n            let newState;\r\n            newState = {...state,\r\n                status:2,\r\n            };\r\n            return newState;\r\n        }\r\n\r\n        case PRODUCTS_SET: {\r\n            let newState;\r\n            newState = {...state,\r\n                status:3,\r\n                data:action.products,\r\n            };\r\n            return newState;\r\n        }\r\n\r\n        case IS_PRODUCT_FAVORITE: {\r\n            let itemIndex = state.data.findIndex(i => i.id === action.item.id);\r\n\r\n            let newState;\r\n            if (itemIndex === 0) {\r\n                newState = {...state,\r\n                status:state.status,\r\n                data: [\r\n                    action.item,\r\n                    ...state.data.slice(1),\r\n                ]\r\n            };\r\n            } else if (itemIndex === state.data.length-1) {\r\n                newState = {...state,\r\n                    status:state.status,\r\n                    data: [\r\n                        ...state.data.slice(0,state.data.length-1),\r\n                        action.item\r\n                    ]\r\n                };\r\n\r\n            } else {\r\n                newState = {...state,\r\n                    status:state.status,\r\n                    data: [\r\n                        ...state.data.slice(0,itemIndex),\r\n                        action.item,\r\n                        ...state.data.slice(itemIndex+1, state.data.length),\r\n                    ]\r\n                };\r\n            }\r\n            return newState;\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}","const CART_LOADING='CART_LOADING';\r\nconst CART_ERROR='CART_ERROR';\r\nconst CART_SET='CART_SET';\r\nconst SHOPPING_CART_ADD='SHOPPING_CART_ADD';\r\nconst SHOPPING_CART_REMOVE='SHOPPING_CART_REMOVE';\r\nconst SHOPPING_CART_REMOVE_ALL='SHOPPING_CART_REMOVE_ALL';\r\n\r\n\r\nconst cartLoadingAC=function() {\r\n    return {\r\n       type: CART_LOADING,\r\n    };\r\n};\r\n\r\nconst cartErrorAC=function() {\r\n    return {\r\n        type: CART_ERROR,\r\n    };\r\n};\r\n\r\nconst cartSetAC=function(shoppingCart) {\r\n    return {\r\n        type: CART_SET,\r\n        shoppingCart:shoppingCart,\r\n    };\r\n};\r\n\r\n\r\nconst shoppingCartAddAC=function(item) {\r\n    return {\r\n        type: SHOPPING_CART_ADD,\r\n        item:item,\r\n    };\r\n}\r\n\r\nconst shoppingCartRemoveAC=function(delItem) {\r\n    return {\r\n        type: SHOPPING_CART_REMOVE,\r\n        item:delItem,\r\n    };\r\n}\r\n\r\n\r\nconst shoppingCartRemoveAllAC=function() {\r\n    return {\r\n        type: SHOPPING_CART_REMOVE_ALL,\r\n    };\r\n}\r\n\r\nexport {\r\n    cartLoadingAC,CART_LOADING,\r\n    cartErrorAC,CART_ERROR,\r\n    cartSetAC,CART_SET,\r\n    shoppingCartAddAC, SHOPPING_CART_ADD,\r\n    shoppingCartRemoveAC, SHOPPING_CART_REMOVE,\r\n    shoppingCartRemoveAllAC, SHOPPING_CART_REMOVE_ALL,\r\n}","import {SHOPPING_CART_ADD, SHOPPING_CART_REMOVE, SHOPPING_CART_REMOVE_ALL, CART_LOADING, CART_ERROR, CART_SET} from \"../Actions/shoppingCartAC\";\r\n\r\nconst initState={\r\n        status: 0, // 0 - ничего не началось, 1 - идёт загрузка, 2 - была ошибка, 3 - данные загружены\r\n        items: null,\r\n};\r\n\r\nexport default function shoppingCartReducer(state=initState, action) {\r\n    switch (action.type) {\r\n\r\n        case CART_LOADING: {\r\n            let newState;\r\n            newState = {...state,\r\n                status:1,\r\n                items:null\r\n            };\r\n            return newState;\r\n        }\r\n\r\n        case CART_ERROR: {\r\n            let newState;\r\n            newState = {...state,\r\n                status:2,\r\n                items:null,\r\n            };\r\n            return newState;\r\n        }\r\n\r\n        case CART_SET: {\r\n            let newState;\r\n            newState = {...state,\r\n                status:3,\r\n                items:action.shoppingCart,\r\n            };\r\n            return newState;\r\n        }\r\n\r\n        case SHOPPING_CART_ADD: {\r\n            let newState;\r\n            newState = {...state,\r\n                items: [...state.items,\r\n                    action.item\r\n                ]\r\n            };\r\n\r\n            return newState;\r\n        }\r\n\r\n        case SHOPPING_CART_REMOVE: {\r\n            let deletedItem = state.items.filter(i => i.id !== action.item.id);\r\n            let newState;\r\n            newState = {...state,\r\n                items: [...deletedItem]\r\n            };\r\n            return newState;\r\n        }\r\n\r\n        case SHOPPING_CART_REMOVE_ALL: {\r\n            let newState;\r\n            newState = {...state,\r\n                items: null\r\n            };\r\n            return newState;\r\n        }\r\n\r\n    default:\r\n    return state;\r\n    }\r\n}\r\n","import { combineReducers } from 'redux'\r\nimport { connectRouter} from 'connected-react-router'\r\nimport productsReducer from \"./productsReducer\";\r\nimport shoppingCartReducer from \"./shoppingCartReducer\";\r\n\r\nexport default (history) => combineReducers({\r\n    router: connectRouter(history),\r\n    products: productsReducer,\r\n    shoppingCart: shoppingCartReducer,\r\n})","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport { routerMiddleware } from 'connected-react-router';\r\nimport thunk from 'redux-thunk';\r\nimport { createBrowserHistory } from 'history';\r\nimport rootReducer from './Reducers';\r\nexport const history = createBrowserHistory();\r\n\r\n\r\nconst initialState = {};\r\nconst enhancers = [];\r\nconst middleware = [\r\n    thunk,\r\n    routerMiddleware(history)\r\n];\r\n\r\nif (process.env.NODE_ENV === 'development') {\r\n    const devToolsExtension = window.__REDUX_DEVTOOLS_EXTENSION__\r\n\r\n    if (typeof devToolsExtension === 'function') {\r\n        enhancers.push(devToolsExtension())\r\n    }\r\n}\r\n\r\nconst composedEnhancers = compose(\r\n    applyMiddleware(...middleware),\r\n    ...enhancers\r\n);\r\n\r\nexport default createStore(\r\n    rootReducer(history),\r\n    initialState,\r\n    composedEnhancers\r\n);\r\n","import { createBrowserHistory } from 'history'\r\nconst history = createBrowserHistory();\r\n\r\nexport default history","import React, {PureComponent} from 'react';\r\nimport {NavLink, withRouter} from \"react-router-dom\";\r\n\r\nimport './PagesNavLinks.scss';\r\n\r\n\r\nclass PagesNavLinks extends PureComponent {\r\n\r\n    handleClick = () => {\r\n        this.props.history.push(`/catalog/page-1`);\r\n    };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"PagesLinks\">\r\n                <NavLink to=\"/\" exact className=\"PageLink\" activeClassName=\"ActivePageLink\">Main Page</NavLink>\r\n                <NavLink to=\"/catalog\" className=\"PageLink\" activeClassName=\"ActivePageLink\"  onClick={this.handleClick}>\r\n                Catalog\r\n                    </NavLink>\r\n                <NavLink to=\"/basket\" className=\"PageLink\" activeClassName=\"ActivePageLink\">Shopping Cart</NavLink>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst withRouterPagesNavLinks = withRouter(PagesNavLinks);\r\nexport default withRouterPagesNavLinks;","import React from 'react';\r\n\r\nexport default function PageMain() {\r\n    return (\r\n              <div className=\"Page_Main\">\r\n                  <h1>My first SPA!</h1>\r\n              </div>\r\n    );\r\n}\r\n    ","import {EventEmitter} from 'events';\r\n\r\nlet appEvents=new EventEmitter();\r\nexport {appEvents};\r\n","import isoFetch from 'isomorphic-fetch';\r\nimport { cartLoadingAC, cartErrorAC, cartSetAC} from \"../Actions/shoppingCartAC\";\r\n\r\n\r\n\r\nfunction shoppingCartThunkAC(dispatch) {\r\n    // Как и любой action creator, productsThunkAC должен вернуть action,\r\n    // только action будет не хэш, а ФУНКЦИЯ.\r\n    // Все middleware стоят ДО редьюсеров, их задача - преобразовывать или фильтровать action-ы.\r\n    // Конкретно middleware \"thunk\", если обнаруживает что action - функция а не хэш, \r\n    // ВЫПОЛНЯЕТ эту функцию и не пропускает её дальше, к редьюсерам.\r\n\r\n    return function() {\r\n        dispatch( cartLoadingAC() );\r\n        isoFetch(\"http://localhost:3004/shoppingCart\")\r\n            .then( (response) => { // response - HTTP-ответ\r\n                if (!response.ok) {\r\n                    let Err=new Error(\"fetch error \" + response.status);\r\n                    Err.userMessage=\"Ошибка связи\";\r\n                    throw Err;\r\n                }\r\n                else\r\n                    return response.json();\r\n            })\r\n            .then( (items) => {\r\n                dispatch( cartSetAC(items) );\r\n            })\r\n            .catch( (error) => {\r\n                console.error(error);\r\n                dispatch( cartErrorAC() );\r\n            })\r\n        ;\r\n    }\r\n\r\n}\r\nexport {shoppingCartThunkAC};\r\n\r\n\r\n // Добравление товара в корзину\r\nfunction shoppingCartAddThunkAC(item) {\r\n    return function() {\r\n        isoFetch(\"http://localhost:3004/shoppingCart\", {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n            body: JSON.stringify(item)\r\n        })\r\n            .then( (response) => { // response - HTTP-ответ\r\n                if (!response.ok) {\r\n                    let Err=new Error(\"fetch error \" + response.status);\r\n                    Err.userMessage=\"Ошибка связи\";\r\n                    throw Err;\r\n                }\r\n                else\r\n                    return response.json();\r\n            })\r\n            .catch( (error) => {\r\n                console.error(error);\r\n            });\r\n    }\r\n}\r\n\r\nexport {shoppingCartAddThunkAC};\r\n\r\n\r\n// Удаление товара из корзины\r\nfunction shoppingCartDELETEThunkAC(delItem) {\r\n    return function() {\r\n        isoFetch(\"http://localhost:3004/shoppingCart/\"+delItem.id, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Content-Type': 'application/json;charset=utf-8'\r\n            },\r\n        })\r\n            .then( (response) => { // response - HTTP-ответ\r\n                if (!response.ok) {\r\n                    let Err=new Error(\"fetch error \" + response.status);\r\n                    Err.userMessage=\"Ошибка связи\";\r\n                    throw Err;\r\n                }\r\n                else\r\n                    return response.json();\r\n            })\r\n            .catch( (error) => {\r\n                console.error(error);\r\n            })\r\n        ;\r\n    }\r\n\r\n}\r\n\r\nexport {shoppingCartDELETEThunkAC};\r\n\r\n\r\nfunction shoppingCartDELETEALLThunkAC(shoppingCart) {\r\n    console.log(shoppingCart);\r\n    return function() {\r\n        for (let i = 0; i <shoppingCart.items.length; i++ ) {\r\n            isoFetch(\"http://localhost:3004/shoppingCart/\" + shoppingCart.items[i].id, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Content-Type': 'application/json;charset=utf-8'\r\n                },\r\n            })\r\n                .then( (response) => { // response - HTTP-ответ\r\n                    if (!response.ok) {\r\n                        let Err=new Error(\"fetch error \" + response.status);\r\n                        Err.userMessage=\"Ошибка связи\";\r\n                        throw Err;\r\n                    }\r\n                    else\r\n                        return response.json();\r\n                })\r\n                .catch( (error) => {\r\n                    console.error(error);\r\n                })\r\n            ;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport {shoppingCartDELETEALLThunkAC};","import React, {PureComponent, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport './SortingSelect.scss'\r\nimport {appEvents} from \"./events\";\r\nconst NO_SORT = \"NO_SORT\";\r\nconst BY_PRICE = \"BY_PRICE\";\r\nconst BY_NAME = \"BY_NAME\";\r\n\r\nclass SortingSelect extends PureComponent {\r\n    static propTypes = {\r\n        products: PropTypes.array,\r\n        match: PropTypes.object.isRequired,\r\n        location: PropTypes.object.isRequired,\r\n        history: PropTypes.object.isRequired,\r\n    };\r\n\r\n    state = {\r\n        sortBy: NO_SORT,\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState, Snapshot) {\r\n        const pageCatalogSortedBy = this.props.location.search.replace(/\\?sort=(?=\\w+)/g,\"\").toUpperCase();\r\n        this.setState({sortBy:pageCatalogSortedBy}, this.getSortedProductsArray);\r\n\r\n    };\r\n\r\n    onHandleChangeSelect = (e) => {\r\n        const {location, history} = this.props;\r\n        this.setState({sortBy: e.target.value});\r\n        history.push(`${location.pathname}?sort=${e.target.value.toLowerCase()}`);\r\n        appEvents.emit('EonHandleChangeSelectSorting', e.target.value);\r\n    };\r\n\r\n\r\n    render() {\r\n        const  {location} = this.props;\r\n        const pageCatalogSortedBy = location.search.replace(/\\?sort=(?=\\w+)/g,\"\").toUpperCase();\r\n        return (\r\n            <Fragment>\r\n                <select value={!location.search ? NO_SORT : pageCatalogSortedBy} onChange={this.onHandleChangeSelect}>\r\n                    <option defaultValue={NO_SORT} value={NO_SORT}>No Sorting:</option>\r\n                    <option value={BY_NAME}>Name A-Z</option>\r\n                    <option value={BY_PRICE}>Price 0-9</option>\r\n                </select>\r\n            </Fragment>\r\n        )\r\n    }\r\n}\r\nexport {NO_SORT, BY_PRICE, BY_NAME};\r\nconst withRouterSorting = withRouter(SortingSelect);\r\nexport default withRouterSorting;","import React, { PureComponent, Fragment } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport {Link} from \"react-router-dom\";\r\nimport { withRouter } from 'react-router-dom'\r\nimport './Pagination.scss';\r\nimport {appEvents} from \"./events\";\r\n\r\nconst LEFT_PAGE = \"LEFT\";\r\nconst RIGHT_PAGE = \"RIGHT\";\r\n\r\n\r\nconst range = (from, to, step = 1) => {\r\n    let i = from;\r\n    const range = [];\r\n\r\n    while (i <= to) {\r\n        range.push(i);\r\n        i += step;\r\n    }\r\n\r\n    return range;\r\n};\r\n\r\n\r\nclass Pagination extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        const {\r\n            totalRecords = null,\r\n            pageNeighbours = 0\r\n        } = props;\r\n        this.totalRecords = typeof totalRecords === \"number\" ? totalRecords : 0;\r\n\r\n        this.pageNeighbours =\r\n            typeof pageNeighbours === \"number\"\r\n                ? Math.max(0, Math.min(pageNeighbours, 2))\r\n                : 0;\r\n    }\r\n\r\n    static propTypes = {\r\n        totalRecords: PropTypes.number.isRequired,\r\n        pageLimit: PropTypes.number,\r\n        pageNeighbours: PropTypes.number,\r\n        cbOnPageChanged: PropTypes.func,\r\n        currentPage: PropTypes.number.isRequired,\r\n        match: PropTypes.object.isRequired,\r\n        location: PropTypes.object.isRequired,\r\n        history: PropTypes.object.isRequired,\r\n    };\r\n\r\n    state = {\r\n        currentPage: this.props.currentPage,\r\n        pageLimit:50,\r\n        totalPages:Math.ceil(this.props.totalRecords / 50),\r\n    };\r\n\r\n    UNSAFE_componentWillMount() {\r\n        appEvents.addListener('EcurrentPageToHandleClick',this.handleClick);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, Snapshot) {\r\n        const locationCurrentPage = +this.props.location.pathname.replace(/[^0-9]/g, \"\");\r\n        if (this.props.location.pathname !== prevProps.location.pathname) {\r\n            this.setState({\r\n                currentPage: locationCurrentPage === 0 || locationCurrentPage > this.totalPages ? 1 : locationCurrentPage,\r\n                totalPages: Math.ceil(this.props.totalRecords / this.state.pageLimit),\r\n            });\r\n            this.gotoPage(locationCurrentPage)\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.gotoPage(this.state.currentPage);\r\n    }\r\n    componentWillUnmount() {\r\n        appEvents.removeListener('EcurrentPageToHandleClick',this.handleClick);\r\n    }\r\n\r\n\r\n    gotoPage = (page) => {\r\n        const { cbOnPageChanged = f => f} = this.props;\r\n        const currentPage = Math.max(0, Math.min(page, this.state.totalPages));\r\n        const {pageLimit,  totalPages} = this.state;\r\n        const paginationData = {\r\n            currentPage,\r\n            totalPages: totalPages,\r\n            pageLimit: pageLimit ,\r\n            totalRecords: this.totalRecords\r\n        };\r\n        this.setState({ currentPage }, () => cbOnPageChanged(paginationData));\r\n    };\r\n\r\n    pageLimitChange10 = () => {\r\n        const totalPages = Math.ceil(this.totalRecords / 10);\r\n        this.setState({\r\n            pageLimit:10,\r\n            totalPages: totalPages,\r\n        }, () => this.gotoPage(this.state.currentPage))\r\n\r\n\r\n    }\r\n\r\n    pageLimitChange50 = () => {\r\n        const totalPages = Math.ceil(this.totalRecords / 50);\r\n        this.setState({\r\n            pageLimit:50,\r\n            totalPages: totalPages,\r\n        }, () => this.gotoPage(this.state.currentPage));\r\n\r\n    }\r\n\r\n    handleClick = (page) => {\r\n        this.gotoPage(page);\r\n    };\r\n\r\n    handleMoveLeft = () => {\r\n        this.gotoPage(this.state.currentPage - 1);\r\n    };\r\n\r\n    handleMoveRight = () => {\r\n        this.gotoPage(this.state.currentPage + 1);\r\n    };\r\n\r\n    fetchPageNumbers = () => {\r\n        const totalPages = this.state.totalPages;\r\n        const currentPage = this.state.currentPage;\r\n        const pageNeighbours = this.pageNeighbours;\r\n\r\n        const totalNumbers = this.pageNeighbours * 2 + 3;\r\n        const totalBlocks = totalNumbers + 2;\r\n\r\n        if (totalPages > totalBlocks) {\r\n            let pages = [];\r\n\r\n            const leftBound = currentPage - pageNeighbours;\r\n            const rightBound = currentPage + pageNeighbours;\r\n            const beforeLastPage = totalPages - 1;\r\n\r\n            const startPage = leftBound > 2 ? leftBound : 2;\r\n            const endPage = rightBound < beforeLastPage ? rightBound : beforeLastPage;\r\n\r\n            pages = range(startPage, endPage);\r\n\r\n            const pagesCount = pages.length;\r\n            const singleSpillOffset = totalNumbers - pagesCount - 1;\r\n\r\n            const leftSpill = startPage > 2;\r\n            const rightSpill = endPage < beforeLastPage;\r\n\r\n            const leftSpillPage = LEFT_PAGE;\r\n            const rightSpillPage = RIGHT_PAGE;\r\n\r\n            if (leftSpill && !rightSpill) {\r\n                const extraPages = range(startPage - singleSpillOffset, startPage - 1);\r\n                pages = [leftSpillPage, ...extraPages, ...pages];\r\n            } else if (!leftSpill && rightSpill) {\r\n                const extraPages = range(endPage + 1, endPage + singleSpillOffset);\r\n                pages = [...pages, ...extraPages, rightSpillPage];\r\n            } else if (leftSpill && rightSpill) {\r\n                pages = [leftSpillPage, ...pages, rightSpillPage];\r\n            }\r\n\r\n            return [1, ...pages, totalPages];\r\n        }\r\n\r\n        return range(1, totalPages);\r\n    };\r\n\r\n    render() {\r\n        if (!this.totalRecords) return null;\r\n\r\n        if (this.totalPages === 1) return null;\r\n\r\n        const { currentPage, totalPages } = this.state;\r\n        const pages = this.fetchPageNumbers();\r\n        const { location } = this.props;\r\n\r\n        return (\r\n            <Fragment>\r\n                <div className={`PageLimitButtons`}>\r\n                    Show:\r\n                    <button value={10} children={10} onClick={this.pageLimitChange10} className={this.state.pageLimit === 10 ? 'active': ''}/>\r\n                    <button value={50} children={50} onClick={this.pageLimitChange50} className={this.state.pageLimit === 50 ? 'active': ''}/>\r\n                </div>\r\n                <nav aria-label=\"paginationBlock\">\r\n                    <ul className=\"pagination\">\r\n                        {pages.map((page, index) => {\r\n\r\n                            if (page === LEFT_PAGE)\r\n                                return (\r\n                                    <li key={index} className=\"page-item\">\r\n                                        <Link to={`/catalog/page-${this.state.currentPage - 1}`}\r\n                                            className=\"page-link\"\r\n                                            aria-label=\"Previous\"\r\n                                            onClick={this.handleMoveLeft}\r\n                                        >\r\n                                            <span aria-hidden=\"true\">&laquo;</span>\r\n                                        </Link>\r\n                                    </li>\r\n                                );\r\n\r\n                            if (page === RIGHT_PAGE)\r\n                                return (\r\n                                    <li key={index} className=\"page-item\">\r\n                                        <Link to ={`/catalog/page-${this.state.currentPage  + 1}`}\r\n                                            className=\"page-link\"\r\n                                            aria-label=\"Next\"\r\n                                            onClick={this.handleMoveRight}\r\n                                        >\r\n                                            <span aria-hidden=\"true\">&raquo;</span>\r\n                                        </Link>\r\n                                    </li>\r\n                                );\r\n\r\n\r\n                            return (\r\n                                <li\r\n                                    key={index}\r\n                                    className={`page-item${\r\n                                        currentPage === page ? \" active\" : \"\"\r\n                                    }`}\r\n                                >\r\n                                    <Link  to ={`/catalog/page-${page + location.search}`}\r\n                                            className=\"page-link\"\r\n                                            onClick={e => this.handleClick(page, e)}\r\n                                    >\r\n                                        {page}\r\n                                    </Link>\r\n                                </li>\r\n                            );\r\n                        })}\r\n                    </ul>\r\n                </nav>\r\n                {currentPage && (\r\n                    <div >\r\n                        Page <span className=\"current-page\">{currentPage}</span> /{\" \"}\r\n                        <span className=\"total-page\">{totalPages}</span>\r\n                    </div>\r\n                )}\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Pagination);\r\n","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass IconStar extends PureComponent {\r\n    static propTypes = {\r\n        className: PropTypes.string,\r\n        fill: PropTypes.string,\r\n        isActive: PropTypes.bool,\r\n    };\r\n\r\n    static defaultProps = {\r\n        className: undefined,\r\n        fill: '#fff',\r\n        isActive: false,\r\n    };\r\n\r\n    render() {\r\n        const {isActive, fill} = this.props;\r\n        return (\r\n            <svg viewBox=\"0 0 49.94 49.94\"\r\n                 height = \"25\"\r\n                 width = \"23\"\r\n                 className = \"star rating\"\r\n                 data-rating = \"1\"\r\n            >\r\n                <path d=\"M48.856,22.73c0.983-0.958,1.33-2.364,0.906-3.671c-0.425-1.307-1.532-2.24-2.892-2.438l-12.092-1.757\r\n\tc-0.515-0.075-0.96-0.398-1.19-0.865L28.182,3.043c-0.607-1.231-1.839-1.996-3.212-1.996c-1.372,0-2.604,0.765-3.211,1.996\r\n\tL16.352,14c-0.23,0.467-0.676,0.79-1.191,0.865L3.069,16.622c-1.359,0.197-2.467,1.131-2.892,2.438\r\n\tc-0.424,1.307-0.077,2.713,0.906,3.671l8.749,8.528c0.373,0.364,0.544,0.888,0.456,1.4L8.224,44.701\r\n\tc-0.183,1.06,0.095,2.091,0.781,2.904c1.066,1.267,2.927,1.653,4.415,0.871l10.814-5.686c0.452-0.237,1.021-0.235,1.472,0\r\n\tl10.815,5.686c0.526,0.277,1.087,0.417,1.666,0.417c1.057,0,2.059-0.47,2.748-1.288c0.687-0.813,0.964-1.846,0.781-2.904\r\n\tl-2.065-12.042c-0.088-0.513,0.083-1.036,0.456-1.4L48.856,22.73z\"\r\n                      fill = {isActive ? 'gold' : fill} stroke=\"#000\"/>\r\n            </svg>\r\n        );\r\n    }\r\n}\r\nexport default IconStar;\r\n","import React, {PureComponent, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link } from \"react-router-dom\";\r\nimport IconStar from './IconStar'\r\nimport {appEvents} from \"./events\";\r\n\r\nimport './ShopCatalogItem.scss';\r\nimport {\r\n    CATALOG_ITEM,\r\n    SINGLE_ITEM,\r\n} from '../pages/PageShop'\r\n\r\nconst IS_FAVORITE = \"IS_FAVORITE\";\r\n\r\nclass  ShopCatalogItem extends PureComponent {\r\n\r\n    static propTypes = {\r\n        item:PropTypes.object,\r\n        showMode: PropTypes.string,\r\n        cartMode: PropTypes.string,\r\n        colorFavorite: PropTypes.bool,\r\n    };\r\n\r\n    state = {\r\n        isFavorite: this.props.item.IS_FAVORITE,\r\n        inCart: false,\r\n        colorFavorite: this.props.colorFavorite,\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState, Snapshot) {\r\n    }\r\n\r\n    isFavoriteItemHandleClick = () => {\r\n        this.state.isFavorite ?\r\n            this.favoriteDisable()\r\n            :\r\n            this.favoriteActive()\r\n\r\n    };\r\n    favoriteActive = () => {\r\n        this.setState({\r\n            isFavorite: true,\r\n        }, () => this.isFavoriteItem(this.state.isFavorite));\r\n\r\n    };\r\n    favoriteDisable = () => {\r\n        this.setState({\r\n            isFavorite: false,\r\n        }, () => this.isFavoriteItem(this.state.isFavorite))\r\n    };\r\n\r\n    isFavoriteItem = () => {\r\n        const {item} = this.props;\r\n        const {isFavorite} = this.state;\r\n        let newItem = {...item};\r\n        if (isFavorite) {\r\n            newItem[IS_FAVORITE] = isFavorite;\r\n        } else {\r\n            delete newItem[IS_FAVORITE];\r\n        }\r\n        appEvents.emit('EisFavoriteItemOnChange', newItem);\r\n    };\r\n\r\n    handleClickAddToCart = () => {\r\n        const {item} = this.props;\r\n        appEvents.emit('EhandleClickAddToCart', item);\r\n        this.setState({\r\n            inCart: true,\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        const {showMode, colorFavorite} = this.props;\r\n        let item = this.props.item;\r\n        const {isFavorite} = this.state;\r\n\r\n        return (\r\n            <div className={`ShopCatalogItem ${isFavorite ? 'active' : ''} ${showMode === SINGLE_ITEM ? 'single' : ''} `} key={item.id} >\r\n                <div className={`block`} style={ isFavorite && colorFavorite ? {backgroundColor: '#ff4b46'} : {}}>\r\n                    <img src={`/Images/Shop/${item.ImgSrc}`} alt=\"\"/>\r\n                    <div className={`itemInfo`} >\r\n                        <h2>\r\n                            {showMode === SINGLE_ITEM ?\r\n                                item.Name\r\n                                : <Link to={`/catalog/item-${item.id}`} className=\"SingleItemName\">{item.Name}</Link>\r\n                            }\r\n                        </h2>\r\n\r\n                        <div className=\"priceBlock\">\r\n                            <span className='itemPrice'>\r\n                                {item.Price === 0 ?\r\n                                    <span>Available only if isFavorite</span>\r\n                                    :\r\n                                    <Fragment>\r\n                                        Price: <span>{item.Price}</span> $\r\n                                    </Fragment>\r\n                                }\r\n                            </span>\r\n                            <div className=\"buttonBlock\">\r\n\r\n                                    <input type=\"button\"\r\n                                           className=\"inBasket\"\r\n                                           value={!item.Price && !isFavorite ? \"can't Order\" : 'Add to Sopping Cart'}\r\n                                           disabled={!item.Price && !isFavorite}\r\n                                           onClick={this.handleClickAddToCart}\r\n                                    />\r\n\r\n                            </div>\r\n                        </div>\r\n                        {showMode === SINGLE_ITEM &&\r\n                        <div>\r\n                            <span>{item.excerpt}</span>\r\n                        </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n                {showMode === CATALOG_ITEM &&\r\n                    <div className=\"favorite\">\r\n                        <button className={`favoriteButton ${isFavorite ? 'active' : ''}`} onClick={this.isFavoriteItemHandleClick}>\r\n                            <IconStar\r\n                                isActive = {isFavorite}/>\r\n                        </button>\r\n                    </div>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport {IS_FAVORITE};\r\nexport default ShopCatalogItem;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {appEvents} from \"./events\";\r\n\r\nclass FavoriteCount extends PureComponent {\r\n    static propTypes = {\r\n        products: PropTypes.array,\r\n        allFavoriteCount: PropTypes.number,\r\n    };\r\n    state = {\r\n        products: this.props.products,\r\n        allFavoriteCount: 0,\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState, Snapshot) {\r\n        if (this.props.products !== prevProps.products) {\r\n            this.setState({\r\n                products:this.props.products,\r\n            })\r\n        }\r\n        this.getFavoriteCount();\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getFavoriteCount();\r\n    };\r\n\r\n\r\n    getFavoriteCount = () => {\r\n        const {products} = this.state;\r\n        let sumOfFavorite = 0;\r\n\r\n        for (let i = 0; i < products.length; i++) {\r\n            if (products[i].IS_FAVORITE === true) {\r\n                sumOfFavorite ++\r\n            }\r\n        }\r\n        this.setState({\r\n            allFavoriteCount: sumOfFavorite,\r\n        });\r\n        return sumOfFavorite;\r\n    };\r\n\r\n    colorAllFavorite = (e) => {\r\n        appEvents.emit('EcolorAllFavoriteByClick', e);\r\n    }\r\n\r\n\r\n    render() {\r\n        const {allFavoriteCount} = this.state;\r\n        return(\r\n           <div>\r\n                {allFavoriteCount > 0 &&\r\n                    <label>\r\n                        <input type={`checkbox`} onChange={this.colorAllFavorite} value={`Color all Favorite: ${allFavoriteCount} products`}/>\r\n                        Color all Favorite: {allFavoriteCount} products\r\n                    </label>\r\n                }\r\n           </div>\r\n\r\n\r\n        );\r\n    }\r\n}\r\nexport default FavoriteCount;","import React, {PureComponent} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {appEvents} from \"./events\";\r\nimport SortingSelect, {BY_NAME, BY_PRICE, NO_SORT} from \"./SortingSelect\"\r\nimport Pagination from \"./Pagination\"\r\nimport ShopCatalogItem from './ShopCatalogItem';\r\nimport {withRouter} from \"react-router-dom\";\r\nimport FavoriteCount from '../Components/FavoriteCount'\r\nimport {\r\n    CATALOG_ITEM,\r\n} from '../pages/PageShop'\r\n\r\nexport class ShopCatalog extends PureComponent {\r\n\r\n    static propTypes = {\r\n        location: PropTypes.object,\r\n        history: PropTypes.object,\r\n        products: PropTypes.array,\r\n        currentPage:PropTypes.number,\r\n        showMode: PropTypes.string,\r\n        allSortedProducts: PropTypes.array,\r\n    };\r\n\r\n\r\n    state = {\r\n        isSortBy: NO_SORT,\r\n        allProducts: this.props.products,\r\n        allSortedProducts: [],\r\n        colorFavorite:false,\r\n        currentPageProducts: [],\r\n        currentPage: this.props.currentPage,\r\n        totalPages: null,\r\n        onPageChangedData:{}\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState, Snapshot) {\r\n        if (this.props.products !== prevProps.products) {\r\n            this.setState({\r\n                allProducts:this.props.products,\r\n            })\r\n        }\r\n        if (this.props.location.search !== prevProps.location.search) {\r\n            const pageCatalogSortedBy = this.props.location.search.replace(/\\?sort=(?=\\w+)/g,\"\").toUpperCase();\r\n            this.setState({isSortBy:pageCatalogSortedBy}, () => this.getSortedProductsArray(this.state.isSortBy));\r\n        }\r\n\r\n        const locationCurrentPage = +this.props.location.pathname.replace(/[^0-9]/g, \"\");\r\n        if (this.props.location.pathname !== prevProps.location.pathname) {\r\n            this.setState({\r\n                currentPage: locationCurrentPage,\r\n            });\r\n        }\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        const pageCatalogSortedBy = this.props.location.search.replace(/\\?sort=(?=\\w+)/g,\"\").toUpperCase();\r\n        this.setState({isSortBy:pageCatalogSortedBy}, () => this.getSortedProductsArray(this.state.isSortBy));\r\n\r\n    }\r\n    componentDidMount() {\r\n        appEvents.addListener('EcolorAllFavoriteByClick',this.colorAllFavoriteProducts);\r\n        appEvents.addListener('EonHandleChangeSelectSorting',this.getSortedProductsArray);\r\n    };\r\n\r\n    componentWillUnmount() {\r\n        appEvents.removeListener('EcolorAllFavoriteByClick',this.colorAllFavoriteProducts);\r\n        appEvents.removeListener('EonHandleChangeSelectSorting',this.getSortedProductsArray);\r\n    };\r\n\r\n\r\n    colorAllFavoriteProducts = () => {\r\n        const {colorFavorite} = this.state;\r\n        this.setState({\r\n            colorFavorite: !colorFavorite,\r\n        });\r\n        this.currentPageToHandleClick();\r\n    }\r\n\r\n    currentPageToHandleClick =() => {\r\n        appEvents.emit('EcurrentPageToHandleClick', this.state.currentPage)\r\n    }\r\n\r\n\r\n    onPageChanged = data => {\r\n        this.setState({\r\n            onPageChangedData:data,\r\n        })\r\n        const { allSortedProducts, isSortBy, allProducts} = this.state;\r\n\r\n        const { currentPage, totalPages, pageLimit } = data;\r\n        const offset = (currentPage - 1) * pageLimit;\r\n        const currentPageProducts = (isSortBy !== NO_SORT ? allSortedProducts : allProducts).slice(offset, offset + pageLimit);\r\n        this.setState({ currentPage, currentPageProducts, totalPages });\r\n    };\r\n\r\n\r\n    getSortedProductsByName = () => {\r\n        const {products} = this.props;\r\n        let newProducts = products.slice();\r\n        let sortedByName;\r\n        sortedByName = newProducts.sort((a, b) => {\r\n            let nameA=a.Name.toLowerCase(),\r\n                nameB=b.Name.toLowerCase();\r\n            if (nameA < nameB)\r\n                return -1;\r\n            if (nameA > nameB)\r\n                return 1;\r\n            return 0;\r\n        });\r\n        this.setState({\r\n            allSortedProducts: sortedByName,\r\n        });\r\n\r\n    };\r\n\r\n    getSortedProductsByPrice = () => {\r\n        const {products} = this.props;\r\n        let newProducts = products.slice();\r\n        let sortedByPrice;\r\n        sortedByPrice = newProducts.sort((a, b) => {\r\n            return a.Price-b.Price;\r\n        });\r\n        this.setState({\r\n            allSortedProducts: sortedByPrice,\r\n        }, () => this.onPageChanged);\r\n\r\n    };\r\n\r\n    getSortedProductsArray =(sortingSelected) => {\r\n        this.setState({\r\n            isSortBy:sortingSelected,\r\n        });\r\n        if (sortingSelected === BY_NAME) {\r\n            this.getSortedProductsByName();\r\n        } else if (sortingSelected === BY_PRICE) {\r\n            this.getSortedProductsByPrice();\r\n        } else {\r\n            this.setState({\r\n                allSortedProducts: [],\r\n                isSortBy:NO_SORT,\r\n            })\r\n        }\r\n        this.currentPageToHandleClick();\r\n\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            allProducts,\r\n            currentPageProducts,\r\n            currentPage,\r\n            colorFavorite,\r\n        } = this.state;\r\n        const totalProducts = allProducts.length;\r\n        if (totalProducts === 0) return null;\r\n\r\n        return (\r\n            <div className={`ShopCatalog`}>\r\n                <div className={`sortingBlock`}>\r\n                    <SortingSelect products={allProducts}/>\r\n                    <FavoriteCount products={allProducts} />\r\n                </div>\r\n\r\n                {\r\n                    currentPageProducts.map((item) => {\r\n                            return <ShopCatalogItem className={`CatalogItem`}\r\n                                                    key={item.id}\r\n                                                    item={item}\r\n                                                    showMode={CATALOG_ITEM}\r\n                                                    colorFavorite={colorFavorite}\r\n                            />\r\n                        }\r\n                        )\r\n\r\n\r\n                }\r\n\r\n                    <Pagination\r\n                        totalRecords={totalProducts}\r\n                        pageNeighbours={1}\r\n                        cbOnPageChanged={this.onPageChanged}\r\n                        currentPage={currentPage}\r\n                    />\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst withRouterShopCatalog = withRouter(ShopCatalog);\r\nexport default withRouterShopCatalog;","import React, {PureComponent} from 'react';\r\nimport {withRouter} from \"react-router\";\r\n\r\nexport class Success extends PureComponent {\r\n\r\n    render() {\r\n        return(\r\n                <h1>Success! Shopping Cart is empty. Thanks!</h1>\r\n        );\r\n    }\r\n}\r\n\r\nconst withRouterSuccess = withRouter(Success);\r\nexport default withRouterSuccess;\r\n","import React, {PureComponent, Fragment} from 'react';\r\nimport {\r\n    Route,\r\n    Switch,\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport {appEvents} from \"../Components/events\";\r\nimport {productsThunkAC,\r\n} from \"../Redux/Thunk/fetchThunkProducts\";\r\nimport {shoppingCartThunkAC,\r\n    shoppingCartAddThunkAC,\r\n} from '../Redux/Thunk/fetchThunkCart'\r\nimport {isProductFavoriteAC} from \"../Redux/Actions/productsAC\";\r\nimport {shoppingCartAddAC} from '../Redux/Actions/shoppingCartAC';\r\nimport {connect} from \"react-redux\";\r\nimport loaderIconGif from '../loader.gif';\r\nimport ShopCatalog from \"../Components/ShopCatalog\";\r\n\r\nimport ShopCatalogItem from '../Components/ShopCatalogItem'\r\nimport Success from \"../Components/Success\";\r\n\r\nconst CATALOG_ITEM = 'CATALOG_ITEM';\r\nconst SINGLE_ITEM = 'SINGLE_ITEM';\r\nconst GREEN = 'GREEN';\r\nconst RED = 'RED';\r\n\r\nexport class PageShop extends PureComponent {\r\n\r\n    static propTypes = {\r\n        match:PropTypes.object.isRequired,\r\n        location: PropTypes.object.isRequired,\r\n        history: PropTypes.object.isRequired,\r\n        products: PropTypes.object, //REDUX\r\n        currentPage:PropTypes.number,\r\n        shoppingCart: PropTypes.object, //REDUX\r\n    };\r\n\r\n    state = {\r\n        currentPage:1,\r\n        products: this.props.products.data,\r\n        shoppingCart: null,\r\n    };\r\n\r\n    UNSAFE_componentWillMount() {\r\n        this.props.dispatch( productsThunkAC(this.props.dispatch));\r\n        this.props.dispatch( shoppingCartThunkAC(this.props.dispatch));\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, Snapshot) {\r\n        const locationCurrentPage = +this.props.location.pathname.replace(/[^0-9]/g, \"\");\r\n\r\n        if (this.props.match.params.urlParams !== undefined ) {\r\n            this.setState({\r\n                currentPage: locationCurrentPage,\r\n            });\r\n        }\r\n            this.setState({\r\n                products:this.props.products.data,\r\n                }\r\n            );\r\n\r\n        this.setState({\r\n            shoppingCart:this.props.shoppingCart.items,\r\n        })\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        appEvents.addListener('EisFavoriteItemOnChange',this.setFavoriteItem);\r\n        appEvents.addListener('EhandleClickAddToCart',this.addItemToShoppingCart);\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        appEvents.removeListener('EisFavoriteItemOnChange',this.setFavoriteItem);\r\n        appEvents.removeListener('EhandleClickAddToCart',this.addItemToShoppingCart);\r\n    };\r\n\r\n    setFavoriteItem = (item) => {\r\n        this.props.dispatch( isProductFavoriteAC(item));\r\n\r\n    };\r\n\r\n    addItemToShoppingCart = (item) => {\r\n        const {shoppingCart} = this.state;\r\n        let itemInCart;\r\n        if (shoppingCart.length > 0) {\r\n            itemInCart = shoppingCart.some(i => i.id === item.id);\r\n            if (!itemInCart) {\r\n                this.props.dispatch(shoppingCartAddAC(item)); //отправляем просто в REDUX\r\n                this.props.dispatch(shoppingCartAddThunkAC(item));//отправляем в AJAX\r\n                appEvents.emit('EshowAlertCart', GREEN);\r\n            } else {\r\n                appEvents.emit('EshowAlertCart', RED);\r\n            }\r\n        } else {\r\n            this.props.dispatch(shoppingCartAddAC(item));//отправляем просто в REDUX\r\n            this.props.dispatch(shoppingCartAddThunkAC(item));//отправляем в AJAX\r\n            appEvents.emit('EshowAlertCart', GREEN);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        const {match, products, location} = this.props;\r\n        if (products.status<=1) {return  <img src={loaderIconGif} alt={`Загрузка данных`} />}\r\n        if (products.status===2) {return <p>Ошибка загрузки данных</p>}\r\n        return (\r\n                <div className={`PageShop`}>\r\n                    <Switch>\r\n                        { location.pathname.includes('page-') ?\r\n                            <Route path={`/${match.params.catalog}/page-:pageNumber`} render={({match}) => {\r\n                            return (\r\n                                <Fragment>\r\n                                    {products.data &&\r\n                                        <ShopCatalog currentPage={+match.params.pageNumber}\r\n                                                products={products.data}\r\n                                                showMode={CATALOG_ITEM}\r\n                                        />\r\n                                    }\r\n                                </Fragment>\r\n                            )\r\n                        }\r\n                        } />\r\n                        :\r\n                            <Route path={`/${match.params.catalog}/item-:itemId`} render={({match}) => {\r\n                                let selectedItem = products.data.filter(i => i.id === +match.params.itemId)[0];\r\n                            return (\r\n                                <ShopCatalogItem className={`SingleItem`}\r\n                                                 item={selectedItem}\r\n                                                 showMode={SINGLE_ITEM}\r\n                                />\r\n                            )\r\n                        }\r\n                        }/>\r\n                        }\r\n                        }\r\n                        <Route path = {`/success`}>\r\n                            <Success  />\r\n                        </Route>\r\n\r\n\r\n                    </Switch>\r\n                </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport {\r\n    CATALOG_ITEM,\r\n    SINGLE_ITEM,\r\n    GREEN,\r\n    RED,\r\n}\r\nconst mapStateToProps = function (state) {\r\n    return {\r\n        products: state.products,\r\n        shoppingCart: state.shoppingCart,\r\n    };\r\n};\r\nconst withRouterPageShop = withRouter(PageShop);\r\nexport default connect(mapStateToProps)(withRouterPageShop);","import isoFetch from 'isomorphic-fetch';\r\n\r\nimport { productsLoadingAC, productsErrorAC, productsSetAC } from \"../Actions/productsAC\";\r\n//import {shoppingCartAddAC} from '../Actions/shoppingCartAC'\r\n\r\n\r\n\r\nexport const productsThunkAC = () => async (dispatch) => {\r\n    dispatch(productsLoadingAC());\r\n    try {\r\n\r\n        const response = await isoFetch(`http://localhost:3004/posts`\r\n            , {\r\n                headers: {\r\n                    Accept: \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    body: JSON.stringify(dispatch)\r\n                }\r\n            }\r\n\r\n        );\r\n\r\n        if (!response.ok) {\r\n            dispatch(productsErrorAC());\r\n        }\r\n        const data = await response.json();\r\n        dispatch(productsSetAC(data));\r\n    } catch (error) {\r\n        throw error;\r\n    }\r\n};\r\n\r\n","import React, {PureComponent, Fragment} from 'react';\r\nimport {appEvents} from \"./events\";\r\nimport {GREEN, RED} from \"../pages/PageShop\";\r\n\r\nimport './Alerts.scss'\r\n\r\nclass Alerts extends PureComponent {\r\n\r\n    state ={\r\n        color: null,\r\n        shouldShow: false,\r\n    };\r\n\r\n    componentDidMount() {\r\n        appEvents.addListener('EshowAlertCart',this.showAlert);\r\n        this.clearTimeout();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        appEvents.removeListener('EshowAlertCart',this.showAlert);\r\n        this.clearTimeout();\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.timer();\r\n    }\r\n\r\n    showAlert = (color) => {\r\n        this.setState({\r\n            color: color,\r\n            shouldShow: true,\r\n        })\r\n    }\r\n\r\n    timer =() => {\r\n        setTimeout(this.showAlert, 1000);\r\n        this.clearTimeout();\r\n    }\r\n\r\n    clearTimeout = () => {\r\n        clearInterval(this.timer);\r\n    }\r\n\r\n    render() {\r\n        const  {color, shouldShow} = this.state;\r\n        return (\r\n            <Fragment>\r\n\r\n                <div className={`AlertsBlock`}>\r\n                        {shouldShow ?\r\n                        <span className={color}>\r\n                            {\r\n                                color === GREEN &&\r\n                                <h3>Product successfully added to shopping cart</h3>\r\n                            }\r\n                            {color === RED &&\r\n                            <h3>The product is already in your shopping cart</h3>\r\n                            }\r\n                        </span>\r\n                            :\r\n                            null\r\n                        }\r\n                </div>\r\n\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default  Alerts;","import React, {PureComponent, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from \"react-router-dom\";\r\nimport {appEvents} from \"./events\";\r\n\r\n\r\nimport './ShoppingCartItem.scss'\r\nimport './ShopCatalogItem.scss'\r\n\r\nclass ShoppingCartItem extends PureComponent {\r\n\r\n    static propTypes = {\r\n        item:PropTypes.object,\r\n    };\r\n\r\n    handleClickRemove = () => {\r\n        const {item} = this.props;\r\n        appEvents.emit('EhandleClickDeleteItem', item);\r\n    }\r\n\r\n    render() {\r\n        const { item} = this.props;\r\n        return (\r\n            <div className={`ShoppingCartItem`} >\r\n                <div className={`block`}>\r\n                    <img src={`/Images/Shop/${item.ImgSrc}`} alt=\"\"/>\r\n                    <h2>\r\n                        <Link to={`/catalog/item-${item.id}`} className=\"SingleItemName\">{item.Name}</Link>\r\n                    </h2>\r\n                    <div className=\"priceBlock\">\r\n                        <span className='itemPrice'>\r\n                                <Fragment>\r\n                                    Price: <span>{item.Price}</span> $\r\n                                </Fragment>\r\n\r\n                        </span>\r\n                        <div className=\"buttonDelete\">\r\n                                <input type=\"button\"\r\n                                       className=\"inBasket\"\r\n                                       value={'Delete'}\r\n                                       onClick={this.handleClickRemove}\r\n                                />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default ShoppingCartItem;","import React, {PureComponent, Fragment} from 'react';\r\nimport {Prompt, withRouter} from 'react-router-dom'\r\nimport PropTypes from 'prop-types';\r\nimport {appEvents} from \"./events\";\r\n\r\nimport './CheckOut.scss'\r\n\r\nclass CheckOut extends PureComponent {\r\n\r\n    static propTypes = {\r\n        location: PropTypes.object.isRequired,\r\n        history: PropTypes.object.isRequired,\r\n    }\r\n\r\n    state ={\r\n        name:'',\r\n        tel:'',\r\n        alert: false,\r\n    };\r\n\r\n    onClickButtonSend =(e) => {\r\n        const  {name, tel} = this.state;\r\n        if (name && tel) {\r\n            this.setState({\r\n                    name:'',\r\n                    tel:'',\r\n                },\r\n                () => appEvents.emit('EdeleteAllFromShoppingCart', e)\r\n            )\r\n        } else {\r\n            this.setState({\r\n                    alert: true,\r\n                }\r\n            )\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const  {alert, name, tel} = this.state;\r\n        return (\r\n            <Fragment>\r\n                <Prompt\r\n                    when={!!this.state.name || !!this.state.tel}\r\n                    message={location => `Are you sure you want to go to ${location.pathname}. Your changes will not be saved!`}\r\n                />\r\n                <div className={`checkoutBlock`}>\r\n                    <input type = \"text\" value={this.state.name} onChange={e => this.setState({ name: e.target.value }) } />\r\n                    {alert && !name && <span className={`alert`}>* Required field</span>}\r\n                    <input type = \"text\" value={this.state.tel} onChange={e => this.setState({ tel: e.target.value })} />\r\n                    {alert && !tel && <span className={`alert`}>* Required field</span>}\r\n                    <input type = \"button\" value={`Send`}\r\n                           onClick={this.onClickButtonSend}\r\n                    />\r\n                </div>\r\n            </Fragment>\r\n        );\r\n    }\r\n}\r\nconst withRouterCheckOut = withRouter(CheckOut);\r\nexport default withRouterCheckOut;","import React, {PureComponent, Fragment} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ShoppingCartItem from \"./ShoppingCartItem\";\r\nimport CheckOut from './CheckOut';\r\nimport {appEvents} from \"./events\";\r\nimport './ShoppingCart.scss'\r\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\r\n\r\nclass ShoppingCart extends PureComponent {\r\n\r\n    static propTypes = {\r\n        shoppingCart: PropTypes.array,\r\n        success:PropTypes.bool,\r\n        history: PropTypes.object.isRequired,\r\n    }\r\n\r\n    state = {\r\n        shoppingCartProducts: this.props.shoppingCart,\r\n        success:true,\r\n    }\r\n\r\n    componentDidMount() {\r\n        appEvents.addListener('EhandleClickDeleteItem',this.deleteItemFromShoppingCart);\r\n        appEvents.addListener('EdeleteAllFromShoppingCart',this.deleteAllFromShoppingCartAfterSubmit);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        appEvents.removeListener('EhandleClickDeleteItem',this.deleteItemFromShoppingCart);\r\n        appEvents.removeListener('EdeleteAllFromShoppingCart',this.deleteAllFromShoppingCartAfterSubmit);\r\n    }\r\n\r\n\r\n    deleteItemFromShoppingCart = (delItem) => {\r\n        const {shoppingCartProducts} = this.state;\r\n        let newshoppingCartProducts = [...shoppingCartProducts].filter(i => i.id !== delItem.id);\r\n        this.setState({\r\n            shoppingCartProducts: newshoppingCartProducts,\r\n        });\r\n    }\r\n\r\n    deleteAllFromShoppingCartAfterSubmit =() => {\r\n        this.setState({\r\n            shoppingCartProducts: [],\r\n            success:true,\r\n        }, () => this.successSubmit());\r\n    }\r\n\r\n    successSubmit = () => {\r\n        const {success} = this.state;\r\n        const {history} = this.props;\r\n        success &&\r\n            history.push(`/success`);\r\n    }\r\n\r\n    render() {\r\n        const {shoppingCartProducts} = this.state;\r\n\r\n        return(\r\n\r\n            <div className={`ShoppingCart`}>\r\n                {shoppingCartProducts.length > 0 &&\r\n                <Fragment>\r\n                    <ReactCSSTransitionGroup\r\n                    transitionName=\"example\"\r\n                    transitionEnter={false}\r\n                    transitionLeave={true}\r\n                    transitionEnterTimeout={500}\r\n                    transitionLeaveTimeout={300}>\r\n                    {\r\n                        shoppingCartProducts.map((item) => {\r\n                                return <ShoppingCartItem\r\n                                    key={item.id}\r\n                                    item={item}\r\n                                />\r\n                            }\r\n                        )\r\n                    }\r\n                    </ReactCSSTransitionGroup>\r\n                    <CheckOut />\r\n                </Fragment>\r\n                    }\r\n                {shoppingCartProducts.length === 0 &&\r\n                    <h1>ShopCart is Empty</h1>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default ShoppingCart;","import React, {PureComponent, Fragment} from 'react';\r\nimport ShoppingCart from '../Components/ShoppingCart'\r\nimport {\r\n    Route,\r\n    withRouter\r\n} from \"react-router-dom\";\r\nimport {shoppingCartRemoveAC, shoppingCartAddAC, shoppingCartRemoveAllAC} from \"../Redux/Actions/shoppingCartAC\";\r\nimport {shoppingCartDELETEThunkAC, shoppingCartThunkAC, shoppingCartAddThunkAC, shoppingCartDELETEALLThunkAC} from \"../Redux/Thunk/fetchThunkCart\";\r\nimport PropTypes from \"prop-types\";\r\nimport loaderIconGif from \"../loader.gif\";\r\nimport {connect} from \"react-redux\";\r\nimport {appEvents} from \"../Components/events\";\r\n\r\nclass PageBasket extends PureComponent  {\r\n\r\n    static propTypes = {\r\n        shoppingCart: PropTypes.object, //Redux\r\n        history:PropTypes.object\r\n    }\r\n\r\n    state = {\r\n        shoppingCartProducts: this.props.shoppingCart.items,\r\n    }\r\n\r\n\r\n    UNSAFE_componentWillMount() {\r\n        this.props.dispatch( shoppingCartThunkAC(this.props.dispatch));\r\n\r\n    }\r\n\r\n     componentDidUpdate(prevProps, prevState, Snapshot) {\r\n        if (this.props.shoppingCart.status === 3) {\r\n            this.setState({\r\n                    shoppingCartProducts:this.props.shoppingCart.items,\r\n                }\r\n            );\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        appEvents.addListener('EhandleClickAddToCart',this.addItemToShoppingCart);\r\n        appEvents.addListener('EhandleClickDeleteItem',this.deleteItemFromShoppingCart);\r\n        appEvents.addListener('EdeleteAllFromShoppingCart',this.deleteAllFromShoppingCartAfterSubmit);\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        appEvents.removeListener('EhandleClickAddToCart',this.addItemToShoppingCart);\r\n        appEvents.removeListener('EhandleClickDeleteItem',this.deleteItemFromShoppingCart);\r\n        appEvents.removeListener('EdeleteAllFromShoppingCart',this.deleteAllFromShoppingCartAfterSubmit);\r\n    };\r\n\r\n    addItemToShoppingCart = (item) => {\r\n        this.props.dispatch(shoppingCartAddAC(item));//отправляем просто в REDUX\r\n        this.props.dispatch(shoppingCartAddThunkAC(item));//отправляем в AJAX\r\n    }\r\n\r\n    deleteItemFromShoppingCart = (delItem) => {\r\n        this.props.dispatch( shoppingCartRemoveAC(delItem)); //отправка в REDUX\r\n        this.props.dispatch( shoppingCartDELETEThunkAC(delItem)) //отправлка в AJAX\r\n    }\r\n\r\n    deleteAllFromShoppingCartAfterSubmit = () => {\r\n        const {shoppingCart} = this.props;\r\n        this.props.dispatch( shoppingCartRemoveAllAC()); //отправка в REDUX\r\n        this.props.dispatch( shoppingCartDELETEALLThunkAC(shoppingCart)) //отправлка в AJAX\r\n    }\r\n\r\n\r\n    render() {\r\n        const {shoppingCart, history} = this.props;\r\n        if ( shoppingCart.status<=1)\r\n            return <img src={loaderIconGif} alt={`Загрузка данных`} />;\r\n\r\n        if ( shoppingCart.status===2)\r\n            return \"ошибка загрузки данных\";\r\n        return (\r\n            <Fragment>\r\n                <Route exact path = {`/basket`}>\r\n                    <ShoppingCart shoppingCart={shoppingCart.items}  history={history}/>\r\n                </Route>\r\n            </Fragment>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function (state) {\r\n    return {\r\n        shoppingCart: state.shoppingCart,\r\n    };\r\n};\r\nconst withRouterPageBasket = withRouter(PageBasket);\r\nexport default connect(mapStateToProps)(withRouterPageBasket);\r\n\r\n    ","import React, {PureComponent} from 'react';\r\nimport './App.scss';\r\nimport {\r\n    Router, Route, Switch, \r\n    Redirect,\r\n   withRouter\r\n} from \"react-router-dom\";\r\nimport history from './history';\r\nimport PagesNavLinks from './pages/PagesNavLinks'\r\nimport PageMain from \"./pages/PageMain\";\r\nimport PageShop from \"./pages/PageShop\";\r\nimport Alerts from './Components/Alerts'\r\nimport PageBasket from \"./pages/PageBasket\";\r\n\r\nclass App extends PureComponent {\r\n\r\n    render() {\r\n        return (\r\n            <Router history={history}>\r\n                <div className=\"App\">\r\n                    <header className=\"App-header\">\r\n                        <PagesNavLinks />\r\n                    </header>\r\n                    <main>\r\n                        <div className=\"contentBlock\">\r\n                            <Switch>\r\n\r\n                                    <Redirect exact from={`/catalog`} to={`/catalog/page-1`} />\r\n\r\n\r\n                                <Route exact path=\"/\" component = {PageMain} />\r\n                                <Route path=\"/basket\" component = {PageBasket} />\r\n                                <Route path=\"/:catalog/:urlParams?\" component = {PageShop} />\r\n                            </Switch>\r\n                        </div>\r\n                    </main>\r\n                    <Alerts />\r\n                </div>\r\n            </Router>\r\n        );\r\n    }\r\n\r\n}\r\nconst withRouterApp = withRouter(App);\r\nexport default withRouterApp;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\n//import ReactDOM from 'react-dom';\r\nimport { render } from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport { ConnectedRouter } from 'connected-react-router'\r\nimport store, { history } from './Redux/store'\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nconst target = document.querySelector('#root');\r\n\r\n\r\nrender(\r\n    <Provider store={store}>\r\n        <ConnectedRouter history={history}>\r\n            <div>\r\n                <App />\r\n            </div>\r\n        </ConnectedRouter>\r\n    </Provider>\r\n    , target\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}